<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ODIN BOSS COMMANDER - FULL</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0a12;
            --bg-panel: rgba(30, 35, 50, 0.8);
            --accent-cyan: #00f2ff;
            --accent-gold: #ffd700;
            --accent-danger: #ff2a6d;
            --text-primary: #ffffff;
            --text-secondary: #a0a5b9;
        }

        body {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, var(--bg-dark), #1a1a2e);
            color: var(--text-primary);
            margin: 0; padding: 20px; min-height: 100vh;
        }

        .container {
            max-width: 900px; margin: 0 auto;
            background: var(--bg-panel); backdrop-filter: blur(15px);
            padding: 25px; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h2 {
            text-align: center; font-family: 'Cinzel', serif;
            color: var(--accent-gold); text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            margin-bottom: 25px;
        }

        /* Í≤ÄÏÉâ Î∞è Ïª®Ìä∏Î°§ */
        .top-bar { display: flex; gap: 10px; margin-bottom: 20px; }
        #search-input {
            flex: 2; background: rgba(0,0,0,0.4); border: 1px solid var(--accent-cyan);
            color: white; padding: 10px; border-radius: 5px; font-family: 'Orbitron';
        }

        /* Î≥¥Ïä§ ÏûÖÎ†• Í∑∏Î¶¨Îìú - Ïä§ÌÅ¨Î°§ Í∞ÄÎä•ÌïòÍ≤å */
        .boss-input-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px; max-height: 400px; overflow-y: auto;
            padding: 10px; background: rgba(0,0,0,0.2); border-radius: 10px;
            margin-bottom: 25px;
        }

        .boss-row {
            background: rgba(255, 255, 255, 0.05); padding: 10px;
            border-radius: 6px; border-left: 3px solid #444;
            display: flex; flex-direction: column; gap: 5px;
        }
        .boss-row:hover { border-left-color: var(--accent-cyan); background: rgba(255,255,255,0.1); }
        .boss-name-title { font-size: 0.9em; font-weight: bold; }
        .boss-row input {
            background: #000; border: 1px solid #333; color: var(--accent-cyan);
            padding: 5px; border-radius: 4px; text-align: center;
        }

        /* ÌÉÄÏù¥Î®∏ Î¶¨Ïä§Ìä∏ */
        .timer-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .timer-item {
            background: rgba(0, 242, 255, 0.05); border-left: 4px solid var(--accent-cyan);
            padding: 12px; border-radius: 0 8px 8px 0;
            display: flex; justify-content: space-between; align-items: center;
        }
        .timer-item.urgent {
            border-left-color: var(--accent-danger); animation: pulse 1.5s infinite;
        }
        .remaining { font-weight: bold; color: var(--accent-cyan); }
        .timer-item.urgent .remaining { color: var(--accent-danger); }

        .controls { display: flex; gap: 10px; margin-top: 20px; }
        button {
            flex: 1; padding: 12px; border: none; border-radius: 5px;
            cursor: pointer; font-family: 'Orbitron'; font-weight: bold;
        }
        .btn-pip { background: #2196f3; color: white; }
        .btn-reset { background: #ff4b2b; color: white; }

        @keyframes pulse { 50% { opacity: 0.6; } }
        #pip-canvas, #pip-video { display: none; }
    </style>
</head>
<body>

<div class="container">
    <h2>‚öîÔ∏è ODIN BOSS COMMANDER ‚öîÔ∏è</h2>

    <div class="top-bar">
        <input type="text" id="search-input" placeholder="Î≥¥Ïä§ Ïù¥Î¶Ñ Í≤ÄÏÉâ..." oninput="filterBosses()">
    </div>

    <div class="boss-input-grid" id="input-fields">
        </div>

    <div class="controls">
        <button class="btn-pip" onclick="togglePIP()">üì∫ PIP Î™®Îìú ÏºúÍ∏∞</button>
        <button class="btn-reset" onclick="resetAll()">üîÑ Ï¥àÍ∏∞Ìôî</button>
    </div>

    <h3 style="color:var(--accent-gold); margin-top:30px;">ACTIVE TIMERS</h3>
    <div class="timer-grid" id="timer-display"></div>
</div>

<video id="pip-video" autoplay muted></video>
<canvas id="pip-canvas" width="300" height="500"></canvas>

<script>
    // 1. Î≥¥ÎÇ¥Ï£ºÏã† Ï£ºÏÜåÏùò Îç∞Ïù¥ÌÑ∞Î•º Í∏∞Î∞òÏúºÎ°ú Ìïú Î≥¥Ïä§ Î¶¨Ïä§Ìä∏ (Î¶¨Ï†† Ï£ºÍ∏∞Îäî ÏùºÎ∞òÏ†ÅÏù∏ Ï†ïÎ≥¥ Í∏∞Ï§Ä)
    const bossData = [
        { name: "Î™®ÎÑ§Í∞ÄÎ¶Ñ", regen: 120 }, { name: "ÎØ∏ÎØ∏Î•¥", regen: 240 },
        { name: "Ïã†ÎßàÎùº", regen: 720 }, { name: "ÏóòÎìúÎ£¨", regen: 720 },
        { name: "ÌéòÌã∞", regen: 720 }, { name: "ÏàòÎìúÎ¶¨", regen: 720 },
        { name: "ÎùºÏù¥ÎÖ∏Î•¥", regen: 720 }, { name: "ÎπÑÏöîÎ•∏", regen: 720 },
        { name: "ÌùêÎãàÎ•¥", regen: 720 }, { name: "ÏÖÄÎ°úÎπÑÏïÑ", regen: 720 },
        { name: "Î∏åÎ•ÄÌûêÎìú", regen: 720 }, { name: "ÏßÄÍ∞ê4Ï∏µ", regen: 480 },
        { name: "ÌååÎ•¥Î∞î", regen: 120 }, { name: "Î∞îÏö∞Ìã∞", regen: 120 },
        { name: "Ïä§ÏπºÎùºÎãàÎ•¥", regen: 120 }, { name: "ÌÜ†Î•¥", regen: 1440 },
        { name: "ÎùºÌÉÄÌÜ†Ïä§ÌÅ¨", regen: 240 }, { name: "Ìó§Î•¥Î™®Îìú", regen: 240 },
        { name: "ÏïºÎ£¨", regen: 240 }, { name: "ÎãàÎìúÌò∏Í∑∏", regen: 1440 },
        { name: "ÏàòÎ•¥Ìä∏", regen: 1440 }, { name: "ÎëêÎùºÏä§Î°úÎ•¥", regen: 480 },
        { name: "ÎÖ∏Ìä∏", regen: 480 }, { name: "Íµ¥Î≤†Ïù¥Í∑∏", regen: 480 },
        { name: "ÏßÄÍ∞ê7Ï∏µ", regen: 480 }, { name: "ÎìúÎùºÏö∞Í∑∏", regen: 240 },
        { name: "Ïä§Î∞îÎ•¥Ìä∏", regen: 240 }, { name: "ÌÉïÍ∑∏Î¶¨Ïä§ÎãàÎ•¥", regen: 240 },
        { name: "ÏßÄÍ∞ê10Ï∏µ", regen: 480 }, { name: "Ïö∞Î°úÎ≥¥Î°úÏä§", regen: 1440 },
        { name: "Ìó§Î•¥Í∞ÄÎ¶Ñ", regen: 120 }, { name: "ÏÉ§Î¨¥ÌÅ¨", regen: 120 },
        { name: "Ïä§Ïª¨ÎìúÎ©îÎ•¥", regen: 120 }, { name: "Î©îÍ∏∞Î•¥", regen: 120 },
        { name: "Î∞úÎ¶¨", regen: 120 }, { name: "ÌôîÏã†Í∑∏Î°úÏïÑ", regen: 1440 },
        { name: "ÌûàÎ°úÌÇ®", regen: 1440 }, { name: "Ïò§Îîò", regen: 1440 },
        { name: "Ìã∞Î•¥", regen: 1440 }
    ];

    let activeTimers = JSON.parse(localStorage.getItem('odin_active_timers')) || [];

    // 2. Î≥¥Ïä§ ÏûÖÎ†• ÌïÑÎìú ÏÉùÏÑ±
    function renderInputFields() {
        const grid = document.getElementById('input-fields');
        grid.innerHTML = '';
        bossData.forEach((boss, index) => {
            const div = document.createElement('div');
            div.className = 'boss-row';
            div.dataset.name = boss.name;
            div.innerHTML = `
                <span class="boss-name-title">${boss.name}</span>
                <input type="number" placeholder="ÎÇ®ÏùÄ Î∂Ñ" onchange="setTimer(${index}, this.value)">
            `;
            grid.appendChild(div);
        });
    }

    function filterBosses() {
        const term = document.getElementById('search-input').value;
        document.querySelectorAll('.boss-row').forEach(row => {
            row.style.display = row.dataset.name.includes(term) ? 'flex' : 'none';
        });
    }

    function setTimer(index, leftMins) {
        if (leftMins === "" || leftMins < 0) return;
        const now = new Date();
        const targetTime = new Date(now.getTime() + leftMins * 60000);
        
        const idx = activeTimers.findIndex(t => t.name === bossData[index].name);
        if (idx > -1) activeTimers[idx].target = targetTime.getTime();
        else activeTimers.push({ name: bossData[index].name, target: targetTime.getTime() });
        
        saveAndRender();
    }

    function saveAndRender() {
        localStorage.setItem('odin_active_timers', JSON.stringify(activeTimers));
        renderTimers();
    }

    function renderTimers() {
        const display = document.getElementById('timer-display');
        display.innerHTML = '';
        const now = new Date().getTime();

        activeTimers.sort((a, b) => a.target - b.target);
        activeTimers = activeTimers.filter(t => t.target - now > -600000); // 10Î∂Ñ ÏßÄÎÇòÎ©¥ ÏÇ≠Ï†ú

        activeTimers.forEach(timer => {
            const diff = timer.target - now;
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            
            const item = document.createElement('div');
            item.className = `timer-item ${diff < 300000 ? 'urgent' : ''}`;
            item.innerHTML = `
                <span>${timer.name}</span>
                <span class="remaining">${diff > 0 ? `${h>0?h+':':''}${m}:${s<10?'0'+s:s}` : 'Ï∂úÌòÑ!'}</span>
            `;
            display.appendChild(item);
        });
        drawCanvas();
    }

    // PIP Ï∫îÎ≤ÑÏä§ Í∑∏Î¶¨Í∏∞
    const canvas = document.getElementById('pip-canvas');
    const ctx = canvas.getContext('2d');
    function drawCanvas() {
        ctx.fillStyle = "#0a0a12"; ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#ffd700"; ctx.font = "bold 20px Arial"; ctx.fillText("ODIN BOSS", 10, 30);
        activeTimers.forEach((t, i) => {
            const diff = t.target - new Date().getTime();
            const m = Math.floor(diff / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            ctx.fillStyle = diff < 300000 ? "#ff2a6d" : "#00f2ff";
            ctx.fillText(`${t.name}: ${diff>0 ? m+':'+(s<10?'0'+s:s) : 'Ï††!'}`, 10, 70 + (i * 35));
        });
    }

    async function togglePIP() {
        const video = document.getElementById('pip-video');
        if (document.pictureInPictureElement) await document.exitPictureInPicture();
        else {
            video.srcObject = canvas.captureStream();
            await video.play();
            await video.requestPictureInPicture();
        }
    }

    function resetAll() { if(confirm("Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?")) { activeTimers = []; saveAndRender(); } }

    renderInputFields();
    setInterval(renderTimers, 1000);
</script>
</body>
</html>
