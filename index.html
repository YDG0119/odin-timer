<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ODIN: BOSS COMMAND CENTER</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Noto+Sans+KR:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #d4af37; --gold-glow: rgba(212, 175, 55, 0.4);
            --bg: #0d0f12; --panel: rgba(26, 29, 36, 0.95);
            --accent: #00d4ff; --danger: #ff4655;
            --text: #e0e0e0;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg); color: var(--text);
            margin: 0; padding: 0;
            background-image: radial-gradient(circle at 50% 50%, #1a1d24 0%, #0d0f12 100%);
            min-height: 100vh;
        }

        /* Ìó§Îçî ÎîîÏûêÏù∏ */
        header {
            background: linear-gradient(to bottom, #1a1d24, #0d0f12);
            padding: 30px 20px; text-align: center;
            border-bottom: 2px solid var(--gold);
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }

        header h1 {
            font-family: 'Cinzel', serif; color: var(--gold);
            margin: 0; font-size: 2.2em; letter-spacing: 4px;
            text-shadow: 0 0 15px var(--gold-glow);
        }

        .main-container {
            max-width: 1100px; margin: 30px auto; padding: 0 20px;
            display: grid; grid-template-columns: 350px 1fr; gap: 30px;
        }

        /* ÏôºÏ™Ω: ÏûÖÎ†• Ï∞Ω */
        .input-section {
            background: var(--panel); border: 1px solid #333;
            border-radius: 12px; padding: 20px; height: fit-content;
            position: sticky; top: 20px;
        }

        .search-box {
            width: 100%; background: #000; border: 1px solid #444;
            color: #fff; padding: 12px; border-radius: 6px;
            margin-bottom: 20px; box-sizing: border-box;
        }

        .boss-grid {
            display: grid; grid-template-columns: 1fr; gap: 10px;
            max-height: 550px; overflow-y: auto; padding-right: 5px;
        }

        .boss-card {
            background: #252932; padding: 12px; border-radius: 6px;
            display: flex; justify-content: space-between; align-items: center;
            border: 1px solid transparent; transition: 0.2s;
        }
        .boss-card:hover { border-color: var(--gold); background: #2d323d; }

        .boss-card span { font-weight: 500; font-size: 0.95em; }
        .boss-card input {
            width: 70px; background: #000; border: 1px solid var(--accent);
            color: var(--accent); padding: 5px; border-radius: 4px; text-align: center;
        }

        /* Ïò§Î•∏Ï™Ω: ÌÉÄÏù¥Î®∏ Î¶¨Ïä§Ìä∏ */
        .timer-section h2 { 
            font-family: 'Cinzel'; color: var(--gold); margin-top: 0;
            border-left: 4px solid var(--gold); padding-left: 15px;
        }

        .active-timers {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px;
        }

        .timer-unit {
            background: linear-gradient(145deg, #1e222a, #15181e);
            border-radius: 10px; padding: 20px; border: 1px solid #333;
            position: relative; overflow: hidden;
            animation: slideIn 0.3s ease-out;
        }

        .timer-unit.imminent { border-color: var(--danger); }
        .timer-unit.imminent::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 3px;
            background: var(--danger); box-shadow: 0 0 10px var(--danger);
        }

        .timer-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .timer-name { font-size: 1.2em; font-weight: 700; color: #fff; }
        .timer-target { font-size: 0.8em; color: #888; }
        .timer-countdown {
            font-size: 2.2em; font-weight: 700; color: var(--accent);
            text-align: center; margin: 10px 0; font-family: monospace;
        }
        .timer-unit.imminent .timer-countdown { color: var(--danger); animation: blink 1s infinite; }

        /* Î≤ÑÌäº Ïä§ÌÉÄÏùº */
        .btn-group { display: flex; gap: 10px; margin-top: 20px; }
        button {
            flex: 1; padding: 12px; border: none; border-radius: 6px;
            font-weight: 700; cursor: pointer; transition: 0.2s;
        }
        .btn-pip { background: var(--accent); color: #000; }
        .btn-reset { background: #333; color: #ccc; }
        button:hover { filter: brightness(1.2); transform: translateY(-2px); }

        @keyframes blink { 50% { opacity: 0.5; } }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } }

        /* Ïä§ÌÅ¨Î°§Î∞î Ïª§Ïä§ÌÖÄ */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #444; border-radius: 10px; }

        @media (max-width: 850px) {
            .main-container { grid-template-columns: 1fr; }
            .input-section { position: static; }
        }
    </style>
</head>
<body>

<header>
    <h1>ODIN: BOSS COMMANDER</h1>
</header>

<div class="main-container">
    <div class="input-section">
        <input type="text" class="search-box" id="search" placeholder="Î≥¥Ïä§ Î™ÖÏπ≠ Í≤ÄÏÉâ..." oninput="filterList()">
        <div class="boss-grid" id="boss-list"></div>
        <div class="btn-group">
            <button class="btn-pip" onclick="togglePIP()">üì∫ PIP Î™®Îìú</button>
            <button class="btn-reset" onclick="resetAll()">Ï¥àÍ∏∞Ìôî</button>
        </div>
    </div>

    <div class="timer-section">
        <h2>ACTIVE BATTLE FRONTS</h2>
        <div class="active-timers" id="active-timers">
            </div>
    </div>
</div>

<video id="pip-video" autoplay muted style="display:none;"></video>
<canvas id="pip-canvas" width="300" height="500" style="display:none;"></canvas>

<script>
    // Î≤§ÏπòÎßàÌÇπ ÏÇ¨Ïù¥Ìä∏ Í∏∞Î∞ò ÌíÄ Î¶¨Ïä§Ìä∏ (39Ï¢Ö)
    const bosses = [
        { name: "Î™®ÎÑ§Í∞ÄÎ¶Ñ", regen: 120 }, { name: "ÎØ∏ÎØ∏Î•¥", regen: 240 }, { name: "Ïã†ÎßàÎùº", regen: 720 },
        { name: "ÏóòÎìúÎ£¨", regen: 720 }, { name: "ÌéòÌã∞", regen: 720 }, { name: "ÏàòÎìúÎ¶¨", regen: 720 },
        { name: "ÎùºÏù¥ÎÖ∏Î•¥", regen: 720 }, { name: "ÎπÑÏöîÎ•∏", regen: 720 }, { name: "ÌùêÎãàÎ•¥", regen: 720 },
        { name: "ÏÖÄÎ°úÎπÑÏïÑ", regen: 720 }, { name: "Î∏åÎ•ÄÌûêÎìú", regen: 720 }, { name: "ÏßÄÍ∞ê4Ï∏µ", regen: 480 },
        { name: "ÌååÎ•¥Î∞î", regen: 120 }, { name: "Î∞îÏö∞Ìã∞", regen: 120 }, { name: "Ïä§ÏπºÎùºÎãàÎ•¥", regen: 120 },
        { name: "ÌÜ†Î•¥", regen: 1440 }, { name: "ÎùºÌÉÄÌÜ†Ïä§ÌÅ¨", regen: 240 }, { name: "Ìó§Î•¥Î™®Îìú", regen: 240 },
        { name: "ÏïºÎ£¨", regen: 240 }, { name: "ÎãàÎìúÌò∏Í∑∏", regen: 1440 }, { name: "ÏàòÎ•¥Ìä∏", regen: 1440 },
        { name: "ÎëêÎùºÏä§Î°úÎ•¥", regen: 480 }, { name: "ÎÖ∏Ìä∏", regen: 480 }, { name: "Íµ¥Î≤†Ïù¥Í∑∏", regen: 480 },
        { name: "ÏßÄÍ∞ê7Ï∏µ", regen: 480 }, { name: "ÎìúÎùºÏö∞Í∑∏", regen: 240 }, { name: "Ïä§Î∞îÎ•¥Ìä∏", regen: 240 },
        { name: "ÌÉïÍ∑∏Î¶¨Ïä§ÎãàÎ•¥", regen: 240 }, { name: "ÏßÄÍ∞ê10Ï∏µ", regen: 480 }, { name: "Ïö∞Î°úÎ≥¥Î°úÏä§", regen: 1440 },
        { name: "Ìó§Î•¥Í∞ÄÎ¶Ñ", regen: 120 }, { name: "ÏÉ§Î¨¥ÌÅ¨", regen: 120 }, { name: "Ïä§Ïª¨ÎìúÎ©îÎ•¥", regen: 120 },
        { name: "Î©îÍ∏∞Î•¥", regen: 120 }, { name: "Î∞úÎ¶¨", regen: 120 }, { name: "ÌôîÏã†Í∑∏Î°úÏïÑ", regen: 1440 },
        { name: "ÌûàÎ°úÌÇ®", regen: 1440 }, { name: "Ïò§Îîò", regen: 1440 }, { name: "Ìã∞Î•¥", regen: 1440 }
    ];

    let timers = JSON.parse(localStorage.getItem('odin_v2_timers')) || [];

    function init() {
        const list = document.getElementById('boss-list');
        bosses.sort((a,b) => a.name.localeCompare(b.name)).forEach((b, i) => {
            const card = document.createElement('div');
            card.className = 'boss-card';
            card.innerHTML = `<span>${b.name}</span><input type="number" placeholder="ÎÇ®ÏùÄ Î∂Ñ" onchange="addTimer('${b.name}', this.value)">`;
            list.appendChild(card);
        });
        updateDisplay();
        setInterval(updateDisplay, 1000);
    }

    function addTimer(name, mins) {
        if (!mins) return;
        const target = Date.now() + (mins * 60000);
        const idx = timers.findIndex(t => t.name === name);
        if (idx > -1) timers[idx].target = target;
        else timers.push({ name, target });
        save();
    }

    function filterList() {
        const q = document.getElementById('search').value;
        document.querySelectorAll('.boss-card').forEach(c => {
            c.style.display = c.firstChild.innerText.includes(q) ? 'flex' : 'none';
        });
    }

    function updateDisplay() {
        const container = document.getElementById('active-timers');
        container.innerHTML = '';
        const now = Date.now();

        timers.sort((a,b) => a.target - b.target);
        timers = timers.filter(t => t.target - now > -600000); // 10Î∂Ñ ÏßÄÎÇòÎ©¥ ÏÇ≠Ï†ú

        timers.forEach(t => {
            const diff = t.target - now;
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            
            const unit = document.createElement('div');
            unit.className = `timer-unit ${diff < 300000 && diff > 0 ? 'imminent' : ''}`;
            unit.innerHTML = `
                <div class="timer-header">
                    <span class="timer-name">${t.name}</span>
                    <span class="timer-target">${new Date(t.target).toLocaleTimeString()}</span>
                </div>
                <div class="timer-countdown">${diff > 0 ? `${h>0?h+':':''}${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}` : 'APPEARED'}</div>
            `;
            container.appendChild(unit);
        });
        drawPIP();
    }

    // PIP Î∞è Ï†ÄÏû• Î°úÏßÅÏùÄ ÏÉùÎûµ/ÎèôÏùºÌïòÍ≤å Ïú†ÏßÄ
    function save() { localStorage.setItem('odin_v2_timers', JSON.stringify(timers)); }
    function resetAll() { if(confirm('Î™®Îì† ÌÉÄÏù¥Î®∏Î•º Ï¥àÍ∏∞ÌôîÌï†ÍπåÏöî?')) { timers = []; save(); } }

    const canvas = document.getElementById('pip-canvas');
    const ctx = canvas.getContext('2d');
    function drawPIP() {
        ctx.fillStyle = "#0d0f12"; ctx.fillRect(0,0,300,500);
        ctx.fillStyle = "#d4af37"; ctx.font = "bold 20px Cinzel"; ctx.fillText("BOSS MONITOR", 15, 40);
        timers.slice(0, 10).forEach((t, i) => {
            const diff = t.target - Date.now();
            const m = Math.floor(diff/60000);
            const s = Math.floor((diff%60000)/1000);
            ctx.fillStyle = diff < 300000 ? "#ff4655" : "#00d4ff";
            ctx.font = "18px monospace";
            ctx.fillText(`${t.name.padEnd(8)} ${diff>0?m+':'+String(s).padStart(2,'0'):'GEN!'}`, 15, 80 + (i*35));
        });
    }

    async function togglePIP() {
        const v = document.getElementById('pip-video');
        if (document.pictureInPictureElement) await document.exitPictureInPicture();
        else { v.srcObject = canvas.captureStream(); await v.play(); await v.requestPictureInPicture(); }
    }

    init();
</script>
</body>
</html>
